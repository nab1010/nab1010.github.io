---
layout: post
title: "GStreamer 03: Basic tutorial 1"
subtitle: "Hello world"
author: "NAB"
header-img: "img/in-post/2022/Dec/nvidia_wallpaper.jpg"
# header-style: text
header-mask: 0.4
lang: vi
catalog: true
# hidden: false
section:  Knowledge
seo-keywords:
  - NVIDIA
  - GStreamer
  - Install
  - install-gstreamer
  - nvidia-gstreamer
  - GStreamer_tutorial
tags:
  - NVIDIA 
  - GStreamer
---


# Goal

Không gì có thể tốt hơn để có ấn tượng đầu tiên về thư viện phần mềm hơn là in "Hello World" trên màn hình

Nhưng do chúng ta đang đối mặt với multimedia frameworks, chúng ta sẽ chạy một video thay vì in dòng chữ.

# Hello world

Copy đoạn code này vào trong file tên `basic_tutorial_1.c`

**basic_tutorial_1.c**

```c
#include <gst/gst.h>

int main(int argc, char *argv[])
{
    GstElement *pipeline;
    GstBus *bus;
    GstMessage *msg;

    /* Initialize GStreamer */
    gst_init(&argc, &argv);

    /* Build the pipeline */
    pipeline = gst_parse_launch("playbin uri=https://www.freedesktop.org/software/gstreamer-sdk/data/media/sintel_trailer-480p.webm", NULL);

    /* Start playing */
    gst_element_set_state(pipeline, GST_STATE_PLAYING);

    /* Wait until error or EOS */
    bus = gst_element_get_bus(pipeline);
    msg = gst_bus_timed_pop_filtered(bus, GST_CLOCK_TIME_NONE, GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

    /* See next tutorial for proper error message handling/parsing */
    if (GST_MESSAGE_TYPE(msg) == GST_MESSAGE_ERROR)
    {
        g_error("An error occurred! Re-run with the GST_DEBUG=*:WARN environment "
                "variable set for more details.");
    }

    /* Free resources */
    gst_message_unref(msg);
    gst_object_unref(bus);
    gst_element_set_state(pipeline, GST_STATE_NULL);
    gst_object_unref(pipeline);
    return 0;
}
```

Complie nó như đã mô tả trong phần cài cài đặt. Nếu bạn gặp lỗi khi complie, kiểm tra lại lần nữa hướng dẫn trong phần đó.

Để complie trên Linux di chuyển vào thư mục chứa code và chạy lệnh để complie sau:

```bash
gcc basic-tutorial-1.c -o basic-tutorial-1 `pkg-config --cflags --libs gstreamer-1.0`
```

# Walkthrough

Hãy xem lại các dòng code này và xem chúng làm gì:

```c
gst_init (&argc, &argv);
```

Đây luôn phải là câu lệnh GStreamer đầu tiên của bạn trong số những thứ khác `gst_init()`:
* Khởi tạo tất cả các cấu trúc bên trong
* Kiểm tra các plug-ins nào có sẵn
* Thực thi bất kỳ tùy chọn dòng lệnh nào dành cho GStreamer các tham số dòng lệnh `argc` và `argv` cho `gst_init()` thì ứng dụng của bạn sẽ tự động được hưởng lợi từ các tùy chọn dòng lệnh tiêu chuẩn của GStreamer (biết thêm về điều này trong Basic tutorial 10: GStream tools)

```c
pipeline = gst_parse_launch(""playbin uri=https://www.freedesktop.org/software/gstreamer-sdk/data/media/sintel_trailer-480p.webm", NULL);
```
Dòng này là trọng tâm của hướng dẫn này, và minh họa **hai** điểm chính: `gst_parse_launch()` và `playbin`.

#### `gst_parse_launch`

GStreamer là một framework được thiết kế để xử lý các luồng đa phương tiện. Truyền thông di chuyển từ các phần tử  "nguồn - source" (nhà sản xuất) xuống các phần tử  "sink" (người dùng), thông qua một loạt các phần tử trung gian và thực hiện tất cả các loại nhiệm vụ. Tập hợp các phần tử liên kết với nhau gọi là "pipeline".

Trong GStreamer bạn sẽ thường xuyên xây dựng pipeline bằng cách lắp ráp các phần tử riêng lẻ theo cách thủ công, tuy nhiên, khi pipeline đủ dễ dàng, vầ bạn không cần bất kỳ tính năng nâng cao nào, bạn có thể sử dụng cách nhanh hơn là `gst_parse_launch()`.

Hàm này lấy một một biểu diễn dạng văn bản của một pipeline và biến nó thành một một pipeline thực tế, rất tiện dụng. Trong thực tế, chức năng này rất tiện dụng, có một công cụ được xây dựng hoàn toàn xung quanh nó mà bạn rất quen thuộc (xem Basic tutorial 10: GStream tools để học về  `gst-launch-1.0` và cú pháp của `gst-launch-1.0`).

#### `playbin`
